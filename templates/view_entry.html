{% extends "base.html" %}

{% block title %}{{ entry.title }}{% endblock %}

{% block content %}
<style>
  .entry-container {
    max-width: 900px;
    margin: 0 auto;
  }

  .back-button {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 10px 20px;
    background: rgba(255, 248, 240, 0.95);
    border: 2px solid rgba(251, 191, 36, 0.4);
    border-radius: 50px;
    color: #92400e;
    text-decoration: none;
    font-weight: 600;
    font-size: 0.95rem;
    margin-bottom: 25px;
    transition: all 0.3s;
  }

  .back-button:hover {
    background: rgba(249, 115, 22, 0.1);
    border-color: #f97316;
    color: #ea580c;
    transform: translateX(-5px);
  }

  .entry-card {
    background: rgba(255, 248, 240, 0.95);
    border-radius: 15px;
    padding: 40px;
    border: 1px solid rgba(255, 200, 150, 0.3);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
  }

  .entry-header {
    border-bottom: 2px solid rgba(251, 191, 36, 0.3);
    padding-bottom: 25px;
    margin-bottom: 30px;
  }

  .entry-title {
    color: #d97706;
    font-size: 2.5rem;
    font-weight: 600;
    margin-bottom: 15px;
    line-height: 1.2;
  }

  .entry-meta {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    align-items: center;
    color: #92400e;
    font-size: 0.95rem;
  }

  .meta-item {
    display: flex;
    align-items: center;
    gap: 6px;
  }

  .meta-item svg {
    color: #f97316;
  }

  .entry-content {
    color: #78350f;
    font-size: 1.15rem;
    line-height: 1.8;
    font-family: 'Georgia', 'Times New Roman', serif;
    margin-bottom: 30px;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  .entry-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-top: 25px;
    border-top: 2px solid rgba(251, 191, 36, 0.3);
    flex-wrap: wrap;
    gap: 15px;
  }

  .entry-stats {
    display: flex;
    gap: 20px;
    color: #92400e;
    font-size: 0.9rem;
  }

  .stat-item {
    display: flex;
    align-items: center;
    gap: 6px;
  }

  .stat-item svg {
    color: #f97316;
  }

  .action-buttons {
    display: flex;
    gap: 12px;
  }

  .btn-edit {
    padding: 10px 25px;
    background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
    border: none;
    border-radius: 50px;
    color: white;
    font-weight: 600;
    font-size: 0.95rem;
    cursor: pointer;
    transition: all 0.3s;
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .btn-edit:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(249, 115, 22, 0.4);
  }

  .btn-delete {
    padding: 10px 25px;
    background: rgba(220, 38, 38, 0.1);
    border: 2px solid #dc2626;
    border-radius: 50px;
    color: #dc2626;
    font-weight: 600;
    font-size: 0.95rem;
    cursor: pointer;
    transition: all 0.3s;
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .btn-delete:hover {
    background: rgba(220, 38, 38, 0.2);
    transform: translateY(-2px);
  }

  .quote-highlight {
    background: rgba(249, 115, 22, 0.1);
    border-left: 4px solid #f97316;
    padding: 20px;
    margin: 25px 0;
    border-radius: 8px;
    font-style: italic;
    color: #92400e;
  }

  @media (max-width: 768px) {
    .entry-card {
      padding: 25px 20px;
    }

    .entry-title {
      font-size: 1.8rem;
    }

    .entry-content {
      font-size: 1.05rem;
    }

    .entry-footer {
      flex-direction: column;
      align-items: stretch;
    }

    .action-buttons {
      width: 100%;
      flex-direction: column;
    }

    .btn-edit, .btn-delete {
      width: 100%;
      justify-content: center;
    }

    .entry-stats {
      justify-content: center;
    }
  }
</style>

<div class="entry-container">
  <!-- Back Button -->
  <a href="{{ url_for('journal') }}" class="back-button">
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-left" viewBox="0 0 16 16">
      <path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8"/>
    </svg>
    Back to Journals
  </a>

  <!-- Entry Card -->
  <div class="entry-card">
    <!-- Entry Header -->
    <div class="entry-header">
      <h1 class="entry-title">{{ entry.title }}</h1>
      {% if entry.edited %}
  <span class="badge bg-warning text-dark">Edited</span>
{% endif %}

      <div class="entry-meta">
        <div class="meta-item">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-calendar3" viewBox="0 0 16 16">
            <path d="M14 0H2a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2M1 3.857C1 3.384 1.448 3 2 3h12c.552 0 1 .384 1 .857v10.286c0 .473-.448.857-1 .857H2c-.552 0-1-.384-1-.857z"/>
            <path d="M6.5 7a1 1 0 1 0 0-2 1 1 0 0 0 0 2m3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2m3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2m-9 3a1 1 0 1 0 0-2 1 1 0 0 0 0 2m3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2m3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2m3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2m-9 3a1 1 0 1 0 0-2 1 1 0 0 0 0 2m3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2m3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2"/>
          </svg>
          <span>{{ entry.diary_time.strftime('%B %d, %Y') }}</span>
        </div>
        <div class="meta-item">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-clock" viewBox="0 0 16 16">
            <path d="M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71z"/>
            <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16m7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0"/>
          </svg>
          <span>{{ entry.diary_time.strftime('%I:%M %p') }}</span>
        </div>
      </div>
    </div>

    <!-- Entry Content -->
    <div class="entry-content">{{ entry.content }}</div>

    <!-- Entry Footer -->
    <div class="entry-footer">
      <div class="entry-stats">
        <div class="stat-item">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-file-text" viewBox="0 0 16 16">
            <path d="M5 4a.5.5 0 0 0 0 1h6a.5.5 0 0 0 0-1zm-.5 2.5A.5.5 0 0 1 5 6h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1-.5-.5M5 8a.5.5 0 0 0 0 1h6a.5.5 0 0 0 0-1zm0 2a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1z"/>
            <path d="M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2zm10-1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1"/>
          </svg>
          <span>{{ entry.content.split()|length }} words</span>
        </div>
        <div class="stat-item">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-textarea-t" viewBox="0 0 16 16">
            <path d="M1.5 2.5A1.5 1.5 0 0 1 3 1h10a1.5 1.5 0 0 1 1.5 1.5v3.563a2 2 0 0 1 0 3.874V13.5A1.5 1.5 0 0 1 13 15H3a1.5 1.5 0 0 1-1.5-1.5zm1 0v11a.5.5 0 0 0 .5.5h10a.5.5 0 0 0 .5-.5v-11a.5.5 0 0 0-.5-.5H3a.5.5 0 0 0-.5.5"/>
            <path d="M3.5 3h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1m0 2h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1m2 2h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1 0-1"/>
          </svg>
          <span>{{ entry.content|length }} characters</span>
        </div>
      </div>

      <div class="action-buttons">
        <button class="btn-edit" onclick="window.location.href='/edit-entry/{{ entry.id }}'">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pencil-square" viewBox="0 0 16 16">
            <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"/>
            <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z"/>
          </svg>
          Edit
        </button>
        <button class="btn-delete" onclick="confirmDelete({{ entry.id }})">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash3" viewBox="0 0 16 16">
            <path d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5M11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47M8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5"/>
          </svg>
          Delete
        </button>
      </div>
    </div>
  </div>
</div>

<script>
  function confirmDelete(entryId) {
    if (confirm('Are you sure you want to delete this journal entry? Its irreversible :_(')) {
      // Create a form and submit it
      const form = document.createElement('form');
      form.method = 'POST';
      form.action = '/delete-entry/' + entryId;
      
      document.body.appendChild(form);
      form.submit();
    }
  }
</script>
{% endblock %}